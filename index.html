<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tarkett - PoC - Search component</title>
    <style>
      :root {
        --color-white: #fff;
        --color-black: #000;
        --color-green: #005344;
        --color-grey: #efefef;
      }

      * {
        box-sizing: border-box;
        font-family: Tahoma, sans-serif;
        margin: 0;
        padding: 0;
      }

      body {
        background: var(--color-green);
        padding: 0 20px;
      }

      ::selection {
        background: var(--color-green);
        color: var(--color-white);
      }

      .container {
        margin: 150px auto;
        max-width: 450px;
      }

      .search {
        background: var(--color-white);
        border-radius: 5px;
        box-shadow: 0px 1px 5px 3px rgba(0, 0, 0, 0.12);
        position: relative;
        width: 100%;
      }

      .search__input {
        border-radius: 5px;
        border: none;
        font-size: 18px;
        height: 45px;
        outline: none;
        padding: 0 20px;
        width: 100%;
      }

      .search.active .search__input {
        border-radius: 5px 5px 0 0;
      }

      .search__input-holder {
        align-items: center;
        box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.1);
        display: grid;
        grid-template-columns: 1fr auto;
      }

      .search__input-affix {
        display: inline-flex;
      }

      .search__link,
      .search__reset {
        background: none;
        border: none;
        color: var(--color-green);
        cursor: pointer;
        font-size: 20px;
        height: 35px;
        line-height: 35px;
        text-align: center;
        width: 35px;
      }

      .search__results {
        max-height: 280px;
        opacity: 0;
        overflow-y: auto;
        padding: 0;
        pointer-events: none;
        scrollbar-color: var(--color-green) var(--color-grey);
        scrollbar-width: thin;
      }

      .search__results::-webkit-scrollbar {
        height: 10px;
        width: 10px;
      }

      .search__results::-webkit-scrollbar-thumb {
        background: linear-gradient(
          to bottom right,
          var(--color-green) 0%,
          var(--color-green) 100%
        );
        border-radius: 5px;
      }

      .search__results::-webkit-scrollbar-track {
        background-color: var(--color-grey);
        border: 1px solid rgba(var(--color-grey), 0.8);
      }

      .search--active .search__results {
        opacity: 1;
        padding: 10px 8px;
        pointer-events: auto;
      }

      .search__results-item {
        border-radius: 3px;
        cursor: default;
        display: none;
        list-style: none;
        padding: 8px 12px;
        width: 100%;
      }

      .search__results-item:hover {
        background: var(--color-grey);
      }

      .search--active .search__results-item {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <form class="search">
        <div class="search__input-holder">
          <label for="search" hidden>Search</label>
          <input
            id="search"
            class="search__input"
            type="text"
            placeholder="Search..."
          />
          <div class="search__input-affix">
            <button class="search__reset" type="reset" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect
                  x="0"
                  y="0"
                  width="24"
                  height="24"
                  fill="none"
                  stroke="none"
                />
                <path
                  fill="currentColor"
                  d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"
                />
              </svg>
            </button>
            <a target="_blank" href="blank" class="search__link">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <rect x="0" y="0" fill="none" stroke="none" />
                <path
                  fill="currentColor"
                  d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14z"
                />
              </svg>
            </a>
          </div>
        </div>
        <div class="search__results"></div>
      </form>
    </div>
    <script language="javascript" type="text/javascript">
      let suggestions = [
        "Circular Selection",
        "Dodaci za mokre prostore",
        "Dodaci za sportske podove",
        "Dodaci za ugradnju",
        "Elastični podovi",
        "Elektrode za varenje",
        "Heterogeni Vinil",
        "Homogeni Vinil",
        "Iglani podovi",
        "Komercijalne Tekstilne Rolne",
        "LVT",
        "Lajsne",
        "Laminat",
        "Linoleum",
        "Mase, prajmeri i lepkovi",
        "Parket",
        "Podloge",
        "Podna i zidna rešenja za mokre prostore",
        "Podovi za kontrolu statičkog elektriciteta",
        "Prateći asortiman",
        "Protivklizni podovi",
        "Specijalni proizvodi",
        "Sportski podovi",
        "Tekstilne ploče",
        "Tekstilni podovi",
        "Tepisi",
        "Tepisoni",
        "Tvrdi podovi",
        "Veštačka trava",
        "Vinil za kuću",
        "Završne i prelazne lajsne",
        "Zaštita i nega",
        "Zidne obloge",
      ];

      const search = document.querySelector(".search");
      const inputBox = search.querySelector(".search__input");
      const results = search.querySelector(".search__results");
      const searchLink = search.querySelector(".search__link");
      const submitBtn = search.querySelector(".search__link");
      const searchResetBtn = search.querySelector(".search__reset");

      inputBox.addEventListener("keyup", (e) => {
        let userData = e.target.value;
        let emptyArray = [];
        if (userData) {
          emptyArray = suggestions.filter((data) => {
            return data
              .toLocaleLowerCase()
              .includes(userData.toLocaleLowerCase());
          });
          emptyArray = emptyArray.map((data) => {
            return (data =
              "<li class='search__results-item'>" + data + "</li>");
          });
          search.classList.add("search--active");
          searchResetBtn.removeAttribute("hidden");
          showSuggestions(emptyArray);
          let allList = results.querySelectorAll("li");
          for (let i = 0; i < allList.length; i++) {
            allList[i].addEventListener("click", (e) => select(e.target));
          }
        } else {
          search.classList.remove("search--active");
          searchResetBtn.setAttribute("hidden", true);
        }
      });

      searchResetBtn.addEventListener("click", (e) => {
        e.preventDefault();
        inputBox.value = "";
        results.innerHTML = "";
        search.classList.remove("search--active");
        searchResetBtn.setAttribute("hidden", true);
        submitBtn.setAttribute("href", "blank");
      });

      const select = (element) => {
        let webLink = "";
        let selectData = element.textContent;

        inputBox.value = selectData;
        searchLink.addEventListener("click", () => {
          webLink = `https://www.tarkett.rs/sr_RS/pretraga/proizvod?search[body]=&filter-category_b2b[]=${selectData}&userQuery=${selectData}`;
          submitBtn.setAttribute("href", webLink);
        });
        search.classList.remove("search--active");
      };

      const showSuggestions = (list) => {
        let listData;
        if (!list.length) {
          userValue = inputBox.value;
          listData = "<li class='search__results-item'>" + userValue + "</li>";
        } else {
          listData = list.join("");
        }
        results.innerHTML = listData;
      };
    </script>
  </body>
</html>
